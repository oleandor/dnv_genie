// GeniE tutorial Topside
//
GenieRules.Compatibility.version = "V7.14-05";
GenieRules.Tolerances.useTolerantModelling = true;
GenieRules.Tolerances.angleTolerance = 2 deg;
GenieRules.Meshing.autoSimplifyTopology = true;
GenieRules.Meshing.eliminateInternalEdges = true;
GenieRules.BeamCreation.DefaultCurveOffset = ReparameterizedBeamCurveOffset();
GenieRules.Transformation.DefaultConnectedCopy = false;
GenieRules.Units.setOutputUnits("m", "kN", "delC");
GenieRules.Units.setInputUnit(Length, "m");
GenieRules.Units.setInputUnit(Force, "kN");
GenieRules.Units.setInputUnit(TempDiff, "delC");
// Material and beam cross sections
Mat1 = MaterialLinear(360000, 7.85 tonne/m^3, 210000000 kPa, 0.3, 1.2e-05 delC^-1, 3e-05 kN*s/m);
HE400A = ISection(0.39 m, 0.3 m, 0.011 m, 0.019 m, 0.027 m);
HE400A.description = "NVS lib : HE 400 A NS-EN 10034";
HE400A.libraryGeneralSection = GeneralSection(0.0159 m^2, 1.9e-06 m^4, 0.0004507 m^4, 8.56e-05 m^4, 0 m^4, 0.0001045453614 m^3, 0.00231 m^3, 0.000571 m^3, 0.007517269793 m^2, 0.00387027846 m^2, 0 m, -2.775557562e-17 m, 0.001280894193 m^3, 0.000432824 m^3, 0.00256 m^3, 0.000855 m^3);
HE600A = ISection(0.59 m, 0.3 m, 0.013 m, 0.025 m, 0.027 m);
HE600A.description = "NVS lib : HE 600 A NS-EN 10034";
HE600A.libraryGeneralSection = GeneralSection(0.0226 m^2, 3.99e-06 m^4, 0.001412 m^4, 0.0001127 m^4, 0 m^4, 0.00018306392 m^3, 0.00479 m^3, 0.000751 m^3, 0.009818428522 m^2, 0.006861863152 m^2, 0 m, 0 m, 0.002675187803 m^3, 0.0005739075 m^3, 0.00536 m^3, 0.001125 m^3);
P_bracing = PipeSection(0.4, 15 mm);
P_leg_norm_15 = PipeSection(80 cm, 15 mm);
P_leg_norm_35 = PipeSection(0.8, 0.035);
P_leg_large_35 = PipeSection(1.3, 0.035);
// Guide plane
GenieRules.Meshing.meshDensityRounded = true;
GuidePlane1 = GuidePlane(Point(0 m,0 m,4 m),Point(27 m,0 m,4 m),Point(27 m,28.5 m,4 m),Point(0 m,28.5 m,4 m),5,5,0.1481481481,0.2962962963,0.2222222222,0.2222222222,0.1111111111,0.1929824561,0.2105263158,0.2105263158,0.1929824561,0.1929824561);
GuidePlane1.snapmode = true;
// Create beams of cellar deck
Mat1.setDefault();
HE600A.setDefault();
Bm2 = StraightBeam(Point(0 m,28.5 m,4 m), Point(27 m,28.5 m,4 m));
Bm3 = StraightBeam(Point(0 m,23 m,4 m), Point(27 m,23 m,4 m));
Bm4 = StraightBeam(Point(0 m,17.5 m,4 m), Point(27 m,17.5 m,4 m));
Bm5 = StraightBeam(Point(4 m,5.5 m,4 m), Point(27 m,5.5 m,4 m));
Bm6 = StraightBeam(Point(4 m,0 m,4 m), Point(27 m,0 m,4 m));
Bm7 = StraightBeam(Point(4 m,11.5 m,4 m), Point(18 m,11.5 m,4 m));
Bm8 = StraightBeam(Point(24 m,11.5 m,4 m), Point(27 m,11.5 m,4 m));
Bm9 = StraightBeam(Point(0 m,17.5 m,4 m), Point(0 m,28.5 m,4 m));
Bm10 = StraightBeam(Point(4 m,0 m,4 m), Point(4 m,28.5 m,4 m));
Bm11 = StraightBeam(Point(12 m,0 m,4 m), Point(12 m,28.5 m,4 m));
Bm12 = StraightBeam(Point(18 m,0 m,4 m), Point(18 m,28.5 m,4 m));
Bm13 = StraightBeam(Point(24 m,0 m,4 m), Point(24 m,28.5 m,4 m));
Bm14 = StraightBeam(Point(27 m,0 m,4 m), Point(27 m,28.5 m,4 m));
// Create set containing beams of cellar deck
Cellar_deck = Set();
Cellar_deck.add(Bm10);
Cellar_deck.add(Bm11);
Cellar_deck.add(Bm12);
Cellar_deck.add(Bm13);
Cellar_deck.add(Bm14);
Cellar_deck.add(Bm2);
Cellar_deck.add(Bm3);
Cellar_deck.add(Bm4);
Cellar_deck.add(Bm5);
Cellar_deck.add(Bm6);
Cellar_deck.add(Bm7);
Cellar_deck.add(Bm8);
Cellar_deck.add(Bm9);
// Copy cellar deck to make main deck
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm2, "Bm15");
MyModelTransformerMap.Add(Bm3, "Bm16");
MyModelTransformerMap.Add(Bm4, "Bm17");
MyModelTransformerMap.Add(Bm5, "Bm18");
MyModelTransformerMap.Add(Bm6, "Bm19");
MyModelTransformerMap.Add(Bm7, "Bm20");
MyModelTransformerMap.Add(Bm8, "Bm21");
MyModelTransformerMap.Add(Bm9, "Bm22");
MyModelTransformerMap.Add(Bm10, "Bm23");
MyModelTransformerMap.Add(Bm11, "Bm24");
MyModelTransformerMap.Add(Bm12, "Bm25");
MyModelTransformerMap.Add(Bm13, "Bm26");
MyModelTransformerMap.Add(Bm14, "Bm27");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0,0,6));
// Create set containing beams of main deck
Main_deck = Set();
Main_deck.add(Bm15);
Main_deck.add(Bm16);
Main_deck.add(Bm17);
Main_deck.add(Bm18);
Main_deck.add(Bm19);
Main_deck.add(Bm20);
Main_deck.add(Bm21);
Main_deck.add(Bm22);
Main_deck.add(Bm23);
Main_deck.add(Bm24);
Main_deck.add(Bm25);
Main_deck.add(Bm26);
Main_deck.add(Bm27);
// Change beam cross section for beams of main deck
Bm21.section = HE400A;
Bm22.section = HE400A;
Bm16.section = HE400A;
Bm17.section = HE400A;
Bm23.section = HE400A;
Bm24.section = HE400A;
Bm19.section = HE400A;
Bm20.section = HE400A;
Bm25.section = HE400A;
Bm26.section = HE400A;
Bm18.section = HE400A;
Bm27.section = HE400A;
Bm15.section = HE400A;
// Create column between cellar and main deck
P_leg_norm_15.setDefault();
Bm28 = StraightBeam(Point(24 m,5.5 m,4 m), Point(24 m,5.5 m,10 m));
Bm28.extendEnd(1, 4);
// Divide column into four segments
Bm28.divideSegmentAtEccentric(1,0.05);
Bm28.divideSegmentAtEccentric(2,0.1052631579);
Bm28.divideSegmentAtEccentric(3,0.4117647059);
// Create cone beam section
Cone = ConeSection(1, true);
// Assign new sections to segments
Bm28.SetSegmentSection(1, P_leg_large_35);
Bm28.SetSegmentSection(2, Cone);
Bm28.SetSegmentSection(3, P_leg_norm_35);
// Copy the column to three new positions
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm28, "Bm1");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,12 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm1, "Bm29");
MyModelTransformerMap.Add(Bm28, "Bm30");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-12 m,0 m,0 m));
// Create deck row 1
P_bracing.setDefault();
Bm31 = StraightBeam(Point(4 m,0 m,4 m), Point(4 m,0 m,10 m));
Bm32 = StraightBeam(Point(4 m,0 m,10 m), Point(12 m,0 m,4 m));
Bm33 = StraightBeam(Point(12 m,0 m,4 m), Point(18 m,0 m,10 m));
Bm34 = StraightBeam(Point(18 m,0 m,10 m), Point(24 m,0 m,4 m));
Bm35 = StraightBeam(Point(24 m,0 m,4 m), Point(27 m,0 m,10 m));
Bm36 = StraightBeam(Point(27 m,0 m,10 m), Point(27 m,0 m,4 m));
Bm37 = StraightBeam(Point(12 m,0 m,4 m), Point(12 m,0 m,10 m));
Bm38 = StraightBeam(Point(18 m,0 m,4 m), Point(18 m,0 m,10 m));
Bm39 = StraightBeam(Point(24 m,0 m,4 m), Point(24 m,0 m,10 m));
// Give offsets to diagonal bracings of deck row 1
Bm32.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), false));
Bm34.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), false));
Bm33.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
Bm35.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
// Copy bracings in Y-direction to deck rows 2-6
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm31, "Bm40");
MyModelTransformerMap.Add(Bm36, "Bm41");
MyModelTransformerMap.Add(Bm38, "Bm42");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,5.5 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm31, "Bm43");
MyModelTransformerMap.Add(Bm36, "Bm44");
MyModelTransformerMap.Add(Bm38, "Bm45");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,17.5 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm31, "Bm46");
MyModelTransformerMap.Add(Bm32, "Bm47");
MyModelTransformerMap.Add(Bm33, "Bm48");
MyModelTransformerMap.Add(Bm35, "Bm49");
MyModelTransformerMap.Add(Bm36, "Bm50");
MyModelTransformerMap.Add(Bm37, "Bm51");
MyModelTransformerMap.Add(Bm38, "Bm52");
MyModelTransformerMap.Add(Bm39, "Bm53");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,11.5 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm31, "Bm54");
MyModelTransformerMap.Add(Bm32, "Bm55");
MyModelTransformerMap.Add(Bm33, "Bm56");
MyModelTransformerMap.Add(Bm34, "Bm57");
MyModelTransformerMap.Add(Bm35, "Bm58");
MyModelTransformerMap.Add(Bm36, "Bm59");
MyModelTransformerMap.Add(Bm37, "Bm60");
MyModelTransformerMap.Add(Bm38, "Bm61");
MyModelTransformerMap.Add(Bm39, "Bm62");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,23 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm31, "Bm63");
MyModelTransformerMap.Add(Bm32, "Bm64");
MyModelTransformerMap.Add(Bm33, "Bm65");
MyModelTransformerMap.Add(Bm34, "Bm66");
MyModelTransformerMap.Add(Bm35, "Bm67");
MyModelTransformerMap.Add(Bm36, "Bm68");
MyModelTransformerMap.Add(Bm37, "Bm69");
MyModelTransformerMap.Add(Bm38, "Bm70");
MyModelTransformerMap.Add(Bm39, "Bm71");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(0 m,28.5 m,0 m));
// Add bracings to protruding part of deck rows 5 and 6
Bm72 = StraightBeam(Point(0 m,17.5 m,4 m), Point(0 m,17.5 m,10 m));
Bm73 = StraightBeam(Point(0 m,23 m,4 m), Point(0 m,23 m,10 m));
Bm74 = StraightBeam(Point(0 m,28.5 m,4 m), Point(0 m,28.5 m,10 m));
Bm75 = StraightBeam(Point(4 m,17.5 m,4 m), Point(0 m,17.5 m,10 m));
Bm76 = StraightBeam(Point(4 m,23 m,4 m), Point(0 m,23 m,10 m));
Bm77 = StraightBeam(Point(4 m,28.5 m,4 m), Point(0 m,28.5 m,10 m));
Bm75.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
Bm76.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
Bm77.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
// Create diagonal bracings of deck row A
Bm78 = StraightBeam(Point(27 m,0 m,10 m), Point(27 m,5.5 m,4 m));
Bm79 = StraightBeam(Point(27 m,5.5 m,4 m), Point(27 m,11.5 m,10 m));
Bm80 = StraightBeam(Point(27 m,11.5 m,10 m), Point(27 m,17.5 m,4 m));
Bm81 = StraightBeam(Point(27 m,17.5 m,4 m), Point(27 m,23 m,10 m));
Bm82 = StraightBeam(Point(27 m,23 m,10 m), Point(27 m,28.5 m,4 m));
Bm78.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), false));
Bm80.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), false));
Bm82.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), false));
Bm79.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
Bm81.CurveOffset = ReparameterizedBeamCurveOffset(LinearVaryingCurveOffset(ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, 0.295 m)), ConstantCurveOffsetAtPoint(Vector3d(0 m, 0 m, -0.195 m)), false));
// Copy bracings in negative X-direction to deck rows B-F
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm78, "Bm83");
MyModelTransformerMap.Add(Bm79, "Bm84");
MyModelTransformerMap.Add(Bm80, "Bm85");
MyModelTransformerMap.Add(Bm81, "Bm86");
MyModelTransformerMap.Add(Bm82, "Bm87");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-9 m,0 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm78, "Bm88");
MyModelTransformerMap.Add(Bm79, "Bm89");
MyModelTransformerMap.Add(Bm80, "Bm90");
MyModelTransformerMap.Add(Bm81, "Bm91");
MyModelTransformerMap.Add(Bm82, "Bm92");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-23 m,0 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm82, "Bm93");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-3 m,0 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm82, "Bm94");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-15 m,0 m,0 m));
MyModelTransformerMap = ObjectNameMap();
MyModelTransformerMap.Add(Bm81, "Bm95");
MyModelTransformerMap.Add(Bm82, "Bm96");
ModelTransformer(MyModelTransformerMap).copyTranslate(Vector3d(-27 m,0 m,0 m));
// Define loads
// Gravity load
LC_Gravity = LoadCase();
LC_Gravity.setAcceleration(Vector3d(0 m/s^2,0 m/s^2,-9.80665 m/s^2));
LC_Gravity.includeSelfWeight();
LC_Gravity.includeStructureMassWithRotationField();
// Helideck equipment load
Helideck = PrismEquipment(15,13,10,50);
Helideck.clearFootprint();
Helideck.addToFootprint(5.5 m,7.5 m,4.5 m,6.5 m);
Helideck.addToFootprint(5.5 m,7.5 m,-6.5 m,-4.5 m);
Helideck.addToFootprint(-7.5 m,-5.5 m,4.5 m,6.5 m);
Helideck.addToFootprint(-7.5 m,-5.5 m,-6.5 m,-4.5 m);
LC_Helideck = LoadCase();
LC_Helideck.placeAtPoint(Helideck,Point(12 m,11.5 m,10 m),LocalSystem(Vector3d(1 m,0 m,0 m), Vector3d(0 m,0 m,1 m)));
autoMSet = Set();
autoMSet.clear();
autoMSet.add(LC_Helideck.equipment(Helideck));
autoMSet.moveTranslate(Vector3d(-1 m,0 m,0 m),geUNCONNECTED);
Delete(autoMSet);
// Flare tower equipment load
FlareTower = PrismEquipment(10,8,5,24);
FlareTower.centreOfGravity(Vector3d(0 m,12 m,12 m));
LC_FlareTower = LoadCase();
LC_FlareTower.placeAtPoint(FlareTower,Point(24 m,0 m,10 m),LocalSystem(Vector3d(1 m,0 m,0 m), Vector3d(0 m,0 m,1 m)));
autoMSet = Set();
autoMSet.clear();
autoMSet.add(LC_FlareTower.equipment(FlareTower));
autoMSet.moveTranslate(Vector3d(-1.5 m,0 m,0 m),geUNCONNECTED);
Delete(autoMSet);
autoMSet = Set();
autoMSet.clear();
autoMSet.add(LC_FlareTower.equipment(FlareTower));
autoMSet.moveRotate(Point(4 m,0 m,10 m),Vector3d(8 m,0 m,0 m),90,geUNCONNECTED);
Delete(autoMSet);
autoMSet = Set();
autoMSet.clear();
autoMSet.add(LC_FlareTower.equipment(FlareTower));
autoMSet.moveTranslate(Vector3d(0,0,-3),geUNCONNECTED);
Delete(autoMSet);
Flare_tower_load = LoadInterface();
Flare_tower_load.addEquipment(FlareTower, LC_FlareTower);
Flare_tower_load.add(Bm6);
Flare_tower_load.add(Bm19);
Flare_tower_load.add(Bm36);
Flare_tower_load.add(Bm38);
Flare_tower_load.addEquipment(FlareTower, LC_FlareTower);
// Load combination
LC_total = LoadCombination();
LC_total.addCase(LC_Gravity, 1);
LC_total.addCase(LC_Helideck, 1.3);
LC_total.addCase(LC_FlareTower, 1.3);
LC_total.convertLoadToMass = false;
LC_total.EquipmentRep = EquipmentAsLineLoads;
// Boundary conditions
Sp1 = SupportPoint(Point(24 m,5.5 m,0 m));
Sp2 = SupportPoint(Point(12 m,5.5 m,0 m));
Sp3 = SupportPoint(Point(12 m,17.5 m,0 m));
Sp4 = SupportPoint(Point(24 m,17.5 m,0 m));
// Run analysis
Analysis1 = Analysis(true);
Analysis1.add(MeshActivity());
Analysis1.add(LinearAnalysis());
Analysis1.step(2).useSestra10(true);
Analysis1.add(LoadResultsActivity());
Analysis1.setActive();
SimplifyTopology();
Analysis1.execute();
//